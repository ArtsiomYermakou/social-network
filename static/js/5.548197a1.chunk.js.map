{"version":3,"sources":["components/common/FormsControls/FormsControls.module.css","components/common/FormsControls/FormsControls.tsx","utils/validators/validators.tsx","components/Dialogs/Dialogs.module.css","components/Dialogs/Message/Message.tsx","components/Dialogs/DialogItem/DialogItem.tsx","components/Dialogs/AddMessageForm/AddMessageForm.tsx","components/Dialogs/Dialogs.tsx","hoc/WithAuthRedirect.tsx","components/Dialogs/DialogsContainer.tsx"],"names":["module","exports","FormControl","meta","touched","error","children","hasError","className","styles","formControl","Textarea","props","input","restProps","Input","size","variant","createField","placeholder","name","validators","component","text","style","marginTop","marginLeft","validate","required","value","maxLengthCreator","maxLength","length","Message","s","dialog","message","DialogItem","path","id","active","to","maxLengthMessage50","reduxForm","form","onSubmit","handleSubmit","Field","Dialogs","dialogsElements","dialogsPage","dialogs","map","d","key","messagesElements","messages","m","isAuth","dialogsItems","values","sendMessage","newMessageBody","mapStateToPropsForRedirect","state","auth","compose","connect","dispatch","sendMessageCreator","Component","RedirectComponent","this","React"],"mappings":"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","file":"static/js/5.548197a1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__x4y-b\",\"error\":\"FormsControls_error__2VbGF\",\"formSummaryError\":\"FormsControls_formSummaryError__DfVoe\"};","import React from \"react\"\r\nimport styles from \"./FormsControls.module.css\"\r\nimport {FieldValidatorType} from \"../../../utils/validators/validators\"\r\nimport {Field, WrappedFieldProps} from \"redux-form\"\r\nimport {WrappedFieldMetaProps} from 'redux-form/lib/Field'\r\nimport {TextField} from \"@material-ui/core\";\r\n\r\ntype FormControlPropsType = {\r\n\tmeta: WrappedFieldMetaProps\r\n}\r\n\r\nconst FormControl: React.FC<FormControlPropsType> = ({meta: {touched, error}, children}) => {\r\n\tconst hasError = touched && error;\r\n\treturn (\r\n\t\t<div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")}>\r\n\t\t\t<div>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t\t{hasError && <span>{error}</span>}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n\tconst {input, meta, ...restProps} = props;\r\n\treturn <FormControl {...props}><textarea {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const Input: React.FC<WrappedFieldProps> = (props) => {\r\n\tconst {input, meta, ...restProps} = props;\r\n\treturn <FormControl {...props}><TextField size={\"small\"}\r\n\t\t\t\t\t\t\t\t\t\t\t  variant={\"outlined\"} {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport function createField<FormKeysType extends string>(placeholder: string | undefined,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t name: FormKeysType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t validators: Array<FieldValidatorType>,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t component: React.FC<WrappedFieldProps>,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t props = {}, text = \"\") {\r\n\treturn <>\r\n\t\t<div style={{marginTop: 20, marginLeft: 16}}>\r\n\t\t\t<Field placeholder={placeholder} name={name}\r\n\t\t\t\t   validate={validators}\r\n\t\t\t\t   component={component}\r\n\t\t\t\t   {...props}\r\n\t\t\t/> {text}\r\n\t\t</div>\r\n\t</>\r\n}","export type FieldValidatorType = (value: string) => string | undefined\r\n\r\n\r\nexport const required: FieldValidatorType = (value) => {\r\n    if (value) return undefined;\r\n    return \"Field is required\";\r\n}\r\n\r\n\r\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (value) => {\r\n    if (value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n    return undefined;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__2yOTe\",\"dialogsItems\":\"Dialogs_dialogsItems__2JE7y\",\"active\":\"Dialogs_active__16Dpi\",\"messages\":\"Dialogs_messages__1DfrS\",\"dialog\":\"Dialogs_dialog__3RvxE\"};","import React from 'react';\r\nimport s from \"./../Dialogs.module.css\"\r\n\r\ntype MessageType = {\r\n    message: any\r\n}\r\nconst Message = (props: MessageType) => {\r\n    return (\r\n        <div className={s.dialog}>\r\n            {props.message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\nimport s from \"./../Dialogs.module.css\"\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype DialogItem = {\r\n    name: string\r\n    id: string | number\r\n}\r\n\r\nconst DialogItem = (props: DialogItem) => {\r\n    let path = \"/dialogs/\" + props.id\r\n    return (\r\n        <div className={s.dialog + \" \" + s.active}>\r\n            <NavLink to={path}>{props.name}</NavLink>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DialogItem;","import React from \"react\";\r\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\";\r\nimport {Textarea} from \"../../common/FormsControls/FormsControls\";\r\nimport {reduxForm, Field} from \"redux-form\";\r\n\r\n\r\nconst maxLengthMessage50 = maxLengthCreator(50);\r\n\r\nconst AddMessageForm = (props: any) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field component={Textarea}\r\n                       validate={ [required, maxLengthMessage50] }\r\n                       name=\"newMessageBody\"\r\n                       placeholder=\"Enter your message\"/>\r\n            </div>\r\n            <div>\r\n                <button>Отправить</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default reduxForm({form: \"dialogs-add-message-form\"})(AddMessageForm);","import React from 'react';\r\nimport s from \"./Dialogs.module.css\"\r\nimport Message from \"./Message/Message\";\r\nimport DialogItem from \"./DialogItem/DialogItem\";\r\nimport {DialogPageType} from \"../../redux/store\";\r\nimport {Redirect} from \"react-router\"\r\nimport AddMessageForm from \"./AddMessageForm/AddMessageForm\";\r\n\r\ntype PropType = {\r\n    updateNewMessageBody: (onNewMessageChange: any) => void\r\n    sendMessage: (values?: any) => void\r\n    dialogsPage: DialogPageType\r\n    isAuth: boolean\r\n}\r\n\r\n\r\nconst Dialogs = (props: PropType) => {\r\n\r\n\r\n    let dialogsElements = props.dialogsPage.dialogs.map(d => <DialogItem name={d.name} key={d.id} id={d.id}/>);\r\n    let messagesElements = props.dialogsPage.messages.map(m => <Message message={m.message} key={m.id}/>);\r\n\r\n    let addNewMessage = (values: any) => {\r\n        props.sendMessage(values.newMessageBody)\r\n    }\r\n\r\n    if (!props.isAuth) return <Redirect to={\"/login\"}/>\r\n\r\n    return (\r\n        <div className={s.dialogs}>\r\n            <div className={s.dialogsItems}>\r\n                {dialogsElements}\r\n            </div>\r\n            <div className={s.messages}>\r\n                <div>{messagesElements}</div>\r\n                <AddMessageForm onSubmit={addNewMessage}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialogs;","import React, {Component} from \"react\";\r\nimport {Redirect} from \"react-router\"\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToPropsForRedirect = (state: any) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = (Component: any) => {\r\n\r\n    class RedirectComponent extends React.Component<any, any> {\r\n        render () {\r\n            if (!this.props.isAuth) return <Redirect to=\"/login\" />\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n}","import React from 'react';\r\nimport {sendMessageCreator} from \"../../redux/dialogs-reducer\";\r\nimport Dialogs from \"./Dialogs\";\r\nimport {connect} from \"react-redux\";\r\nimport {withAuthRedirect} from \"../../hoc/WithAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\n\r\n// type MapStateToPropsType = {\r\n//     dialogsPage: DialogPageType\r\n//     isAuth: (auth: boolean) => void\r\n// }\r\n// type PropType = {\r\n// store: any\r\n// dispatch: (action: ActionType) => void\r\n// }\r\n\r\n\r\nlet mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        dialogsPage: state.dialogsPage\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n        sendMessage: (newMessageBody: string) => {\r\n            dispatch(sendMessageCreator(newMessageBody));\r\n        }\r\n    }\r\n}\r\n\r\nexport default compose<any>(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    withAuthRedirect\r\n)(Dialogs);"],"sourceRoot":""}