(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{227:function(e,t,r){e.exports={formControl:"FormsControls_formControl__x4y-b",error:"FormsControls_error__2VbGF",formSummaryError:"FormsControls_formSummaryError__DfVoe"}},228:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return n}));var a=function(e){if(!e)return"Field is required"},n=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},229:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return c}));var a=r(0),n=r.n(a),o=r(227),s=r.n(o),i=r(110),u=function(e){var t=e.meta.touched&&e.meta.error;return n.a.createElement("div",{className:s.a.formControl+" "+(t?s.a.error:"")},n.a.createElement("div",null,n.a.createElement("textarea",Object.assign({},e.input,e))),t&&n.a.createElement("span",{className:s.a.error},e.meta.error))},l=function(e){var t=e.meta.touched&&e.meta.error;return n.a.createElement("div",{className:s.a.formControl+" "+(t?s.a.error:"")},n.a.createElement("div",null,n.a.createElement("input",Object.assign({},e.input,e))),t&&n.a.createElement("span",{className:s.a.error},e.meta.error))},c=function(e,t,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return n.a.createElement("div",null,n.a.createElement(i.a,Object.assign({placeholder:e,name:t,validate:r,component:a},o))," ",s)}},289:function(e,t,r){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__35bGy",mainPhoto:"ProfileInfo_mainPhoto__1ZueE"}},290:function(e,t,r){e.exports={postsBlock:"MyPosts_postsBlock__1OnL9",posts:"MyPosts_posts__B_2z8"}},291:function(e,t,r){e.exports={item:"Post_item___TXG_"}},293:function(e,t,r){"use strict";r.r(t);var a=r(25),n=r(26),o=r(28),s=r(27),i=r(0),u=r.n(i),l=r(289),c=r.n(l),m=r(35),p=r(58);var f=r(72);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,n=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(u){n=!0,o=u}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return r}}(e,t)||Object(f.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(e){var t=d(Object(i.useState)(!1),2),r=t[0],a=t[1],n=d(Object(i.useState)(e.status),2),o=n[0],s=n[1];Object(i.useEffect)((function(){s(e.status)}),[e.status]);return u.a.createElement("div",null,!r&&u.a.createElement("div",null,u.a.createElement("span",{onDoubleClick:function(){a(!0)}},e.status||"-----")),r&&u.a.createElement("div",null,u.a.createElement("input",{autoFocus:!0,onBlur:function(){a(!1),e.updateStatus(o)},onChange:function(e){s(e.currentTarget.value)},value:o})))},v=r(73),b=r.n(v),E=function(e){if(!e.profile)return u.a.createElement(m.a,null);return u.a.createElement("div",null,u.a.createElement("div",{className:c.a.descriptionBlock},u.a.createElement("img",{src:e.profile.photos.large||b.a,className:c.a.mainPhoto,alt:"profile"}),u.a.createElement("br",null),e.isOwner&&u.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}}),u.a.createElement(h,{status:e.status,updateStatus:p.f})))},g=r(30),y=r(290),P=r.n(y),_=r(291),O=r.n(_),j=function(e){return u.a.createElement("div",{className:O.a.item},u.a.createElement("img",{src:"https://i.pinimg.com/736x/1f/40/8d/1f408d7c2ad61ec6a4c8c28bd851fe85--my-works-mice.jpg"}),e.message,u.a.createElement("div",null,u.a.createElement("span",null,"like")," ",e.likesCount))},S=r(110),k=r(111),w=r(228),C=r(229),x=u.a.memo((function(e){var t=Object(g.a)(e.posts).reverse().map((function(e){return u.a.createElement(j,{message:e.message,key:e.id,likesCount:e.likesCount})}));u.a.createRef();return u.a.createElement("div",{className:P.a.postsBlock},u.a.createElement("h3",null,"My posts"),u.a.createElement(N,{onSubmit:function(t){e.addPost(t.newPostText)}}),u.a.createElement("div",{className:P.a.posts},t))})),I=Object(w.a)(10),N=Object(k.a)({form:"ProfileAddNewPostForm"})((function(e){return u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",null,u.a.createElement(S.a,{name:"newPostText",component:C.b,validate:[w.b,I],placeholder:"Post message"})),u.a.createElement("div",null,u.a.createElement("button",null,"Add post")))})),B=x,F=r(21),T=Object(F.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(Object(p.a)(t))}}}))(B),A=function(e){return u.a.createElement("div",null,u.a.createElement(E,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),u.a.createElement(T,null))},M=r(6),U=r(17),D=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,r){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return u.a.createElement(A,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),r}(u.a.Component);t.default=Object(U.d)(Object(F.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:p.d,getStatus:p.c,updateStatus:p.f,savePhoto:p.e}),M.f)(D)}}]);
//# sourceMappingURL=4.e00af75f.chunk.js.map